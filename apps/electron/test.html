<!DOCTYPE html>
<html>
<head>
    <title>Electron API Test</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
        }
        pre {
            background: #f4f4f4;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Electron API Test</h1>

    <div id="status"></div>

    <div id="api-info"></div>

    <button id="test-folder" style="display: none;">Test Open Folder</button>

    <script>
        const statusEl = document.getElementById('status');
        const apiInfoEl = document.getElementById('api-info');
        const testButton = document.getElementById('test-folder');

        // Check if electronAPI is available
        if (window.electronAPI) {
            statusEl.className = 'status success';
            statusEl.textContent = '✅ electronAPI is available!';

            apiInfoEl.innerHTML = `
                <h2>API Information:</h2>
                <pre>${JSON.stringify(window.electronAPI, (key, value) => {
                    if (typeof value === 'function') {
                        return '[Function]';
                    }
                    return value;
                }, 2)}</pre>
            `;

            testButton.style.display = 'block';
            testButton.onclick = async () => {
                const testPath = '/Users/n/work/beg-facture';
                console.log('Testing openFolder with:', testPath);
                try {
                    const result = await window.electronAPI.openFolder(testPath);
                    console.log('Result:', result);
                    alert('Folder opened successfully! Check Finder.');
                } catch (e) {
                    console.error('Error:', e);
                    alert('Error opening folder: ' + e.message);
                }
            };
        } else {
            statusEl.className = 'status error';
            statusEl.textContent = '❌ electronAPI is NOT available';

            apiInfoEl.innerHTML = '<p>The Electron API is not accessible. This might mean:</p>' +
                '<ul>' +
                '<li>The preload script is not loading correctly</li>' +
                '<li>There is an error in the preload script</li>' +
                '<li>The page is not running in Electron</li>' +
                '</ul>';
        }
    </script>
</body>
</html>